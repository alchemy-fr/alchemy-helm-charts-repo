{{- with .Values.expose }}
{{- if and $.Values.stack.running .enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: expose-client-config
data:
  S3_REQUEST_SIGNATURE_TTL: {{ .api.config.requestSignatureTtl | quote }}
  DISABLE_INDEX_PAGE: {{ ternary "true" "false" .client.disableIndexPage | quote }}
  {{- include "app.client.configMap" $ | indent 2 }}
  {{- if .matomo.enabled }}
  MATOMO_BASE_URL: {{ required "Missing expose.matomo.baseUrl" .matomo.baseUrl | quote }}
  MATOMO_SITE_ID: {{ required "Missing expose.matomo.siteId" .matomo.siteId | quote }}
  {{- end }}
{{- end }}
{{- end }}
